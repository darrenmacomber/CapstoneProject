<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
     <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  </head>
  <body>
    <div id="APILibrary">
      <input type="text" v-model="search_books"/></input>
      <button v-on:click="searchRepos">search</button>
      <div id="book_data">
        <div v-for="doc in docs">
          <div><a>ID: [[doc.id]]</a></div>
          <div><a>Title: [[ doc.title ]]</a></div>
          <div><a>Author: [[ doc.author ]]</a></div>
          <div><a>Languages: [[ doc.language ]]</a></div>
          <div><a>Edition: [[ doc.edition ]]</a></div>
          <div><a>Year Published: [[ doc.publish_year ]]</a></div>
          <div><a>ISBN: [[ doc.isbn ]]</a></div>
          <div><a>GoodReads ID: [[ doc.id_goodreads ]]</a></div>
          <div><a>Subject Tags: [[ doc.subject_tags ]]</a></div>
          <div><a>User Tags: [[ doc.user_tags ]]</a></div>
          <hr/>
        </div>
      </div>
    </div>
    <script type="text/javascript">
      let APILibrary = new Vue({
        el: '#APILibrary',
        delimiters: ['[[', ']]'],
        data: {
          search_books: 'search books here',
          docs: [],
        },
        methods: {
          searchRepos: function() {
            let url = 'http://openlibrary.org/search.json'
            let config = {
              params: {
                q: this.search_books
              }
            }
            axios.get(url, config).then(response => {
              console.log(response.data)
              let data = response.data
              this.docs = []
              this.authors = ''
                for (let i=0; i<data.docs.length; ++i) {
                  this.docs.push({
                    id: this.id,
                    title: data.docs[i].title,
                    author: data.docs[i].author_name,
                    author_key: data.docs[i].author_key,
                    language: data.docs[i].language,
                    edition_count: data.docs[i].edition_count,
                    edition_key: data.docs[i].edition_key,
                    publish_date: data.docs[i].publish_date,
                    publish_year: data.docs[i].first_publish_year,
                    isbn: data.docs[i].isbn,
                    id_goodreads: data.docs[i].id_goodreads,
                    subject_tags: data.docs[i].subject,
                    user_tags: [],
                    // user_id
                    // id corresponds to book in API
                    //
                  })
                }
              })
            }
          }
        })
    </script>
  </body>
</html>
